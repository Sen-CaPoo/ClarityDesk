# 遊客模式 - 快速使用指南

## 功能概述

遊客模式允許使用者無需 LINE 登入即可快速體驗 ClarityDesk 系統。

## 使用方式

### 1. 訪問登入頁面

前往 `/Account/Login` 頁面,您會看到兩個登入選項:

```
┌─────────────────────────────────┐
│  歡迎使用 ClarityDesk             │
│  顧客問題紀錄追蹤系統              │
│                                 │
│  ┌───────────────────────────┐  │
│  │  使用 LINE 登入            │  │ ← 正式使用者
│  └───────────────────────────┘  │
│                                 │
│  ──────── 或 ────────           │
│                                 │
│  ┌───────────────────────────┐  │
│  │  以訪客身份繼續            │  │ ← 遊客模式
│  └───────────────────────────┘  │
└─────────────────────────────────┘
```

### 2. 選擇遊客模式

點擊「**以訪客身份繼續**」按鈕:
- ✅ 無需註冊
- ✅ 無需 LINE 帳號
- ✅ 立即開始使用

### 3. 使用系統

登入後您可以:
- ✅ 瀏覽回報單列表
- ✅ 建立新回報單
- ✅ 查看回報單詳情
- ✅ 更新回報單狀態
- ✅ 新增回報單備註
- ❌ 無法存取管理功能 (僅限 Admin 角色)

## 遊客模式特點

### 權限
- **角色**: 一般使用者 (`User`)
- **功能**: 與正式使用者相同的基本功能
- **限制**: 無法存取系統管理功能

### 會話管理
- **會話期限**: 365 天
- **持久化**: 是 (關閉瀏覽器後仍保持登入)
- **登出**: 可透過登出功能結束會話

### 帳號資訊
- **使用者名稱**: 訪客
- **帳號識別**: 所有遊客共用同一個通用帳號
- **資料追蹤**: 遊客建立的資料會記錄在同一個使用者 ID 下

## 何時使用遊客模式

### ✅ 適合的情境

1. **快速體驗**
   - 想要快速了解系統功能
   - 不想先註冊就試用

2. **臨時使用**
   - 偶爾使用,不需要個人帳號
   - 測試或展示用途

3. **評估階段**
   - 評估系統是否符合需求
   - 決定是否要正式註冊

### ❌ 不適合的情境

1. **需要區分身份**
   - 需要追蹤個人操作記錄
   - 需要個人化設定

2. **長期使用**
   - 計劃長期使用系統
   - 需要建立大量資料

3. **團隊協作**
   - 需要與團隊成員協作
   - 需要明確的責任歸屬

## 從遊客轉為正式使用者

如果您在使用遊客模式後決定長期使用:

1. 登出遊客帳號
2. 返回登入頁面
3. 選擇「使用 LINE 登入」
4. 完成 LINE 身份驗證
5. 開始以正式使用者身份使用

**注意**: 遊客模式下建立的資料無法自動轉移到正式帳號。

## 技術細節

### 遊客帳號屬性
```json
{
  "lineUserId": "guest",
  "displayName": "訪客",
  "role": "User",
  "isActive": true,
  "pictureUrl": null
}
```

### 身份驗證方式
- 使用 ASP.NET Core Cookie Authentication
- Claims 包含: UserId, Role, Name, NameIdentifier

### 資料庫
- 遊客帳號儲存在 `Users` 資料表
- 首次使用時自動建立
- 與正式使用者使用相同的資料表結構

## 常見問題

### Q1: 遊客模式安全嗎?
**A**: 是的。遊客模式仍然需要身份驗證,並且權限限制為一般使用者,無法存取管理功能。

### Q2: 多個遊客會互相干擾嗎?
**A**: 是的。所有遊客共用同一個帳號,因此無法區分不同遊客的操作。這是設計上的權衡,以降低使用門檻。

### Q3: 遊客建立的資料會保留嗎?
**A**: 會。遊客建立的資料會永久保留在資料庫中,但無法區分是哪個遊客建立的。

### Q4: 可以從遊客升級為正式使用者嗎?
**A**: 目前需要重新登入。未來可能會新增資料轉移功能。

### Q5: 遊客模式有使用限制嗎?
**A**: 目前沒有特別的頻率限制,但建議生產環境可考慮增加限制以防止濫用。

## 相關文件

- [完整實作說明](./guest-mode-implementation.md)
- [變更日誌](../CHANGELOG-GuestMode-20251023.md)
- [使用者手冊](./user-manual.md)

## 回饋與支援

如果您在使用遊客模式時遇到問題,或有任何建議,請聯繫系統管理員。

---

**最後更新**: 2025-10-23  
**功能版本**: Phase 5
